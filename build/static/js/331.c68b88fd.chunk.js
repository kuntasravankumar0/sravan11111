"use strict";(self.webpackChunkmysite3=self.webpackChunkmysite3||[]).push([[331],{331:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(555),l=a(43),n=a(514),c=a(579);const i=function(){const[e,s]=(0,l.useState)([]),[a,i]=(0,l.useState)([]),[d,r]=(0,l.useState)(!1),[o,h]=(0,l.useState)(""),[u,j]=(0,l.useState)(""),[m,v]=(0,l.useState)(""),[p,x]=(0,l.useState)(""),[g,N]=(0,l.useState)("pending"),[b,A]=(0,l.useState)({totalPending:0,totalApproved:0,totalRejected:0,totalAll:0}),y=(0,l.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";h(e),j(s),setTimeout(()=>{h(""),j("")},5e3)},[]),R=(0,l.useCallback)(async()=>{try{r(!0);const e=(await(0,n.uR)()).data||[];s(e),A(s=>(0,t.A)((0,t.A)({},s),{},{totalPending:e.length}))}catch(e){console.error("LOAD PENDING ERROR:",null===e||void 0===e?void 0:e.message),y("\u274c Failed to load pending users. Please try again.","error")}finally{r(!1)}},[y]),f=(0,l.useCallback)(async()=>{try{r(!0);const e=(await(0,n.Oh)()).data||[];i(e);const s=e.reduce((e,s)=>(e.totalAll++,"approved"===s.status?e.totalApproved++:"rejected"===s.status&&e.totalRejected++,e),{totalAll:0,totalApproved:0,totalRejected:0});A(e=>(0,t.A)((0,t.A)({},e),s))}catch(e){console.error("LOAD ALL ERROR:",null===e||void 0===e?void 0:e.message),y("\u274c Failed to load all users. Please try again.","error")}finally{r(!1)}},[y]);(0,l.useEffect)(()=>{R(),f()},[R,f]);const w=(0,l.useCallback)(async e=>{if(!d){r(!0);try{await(0,n.jt)(e),y("\u2705 User approved successfully!","success"),await Promise.all([R(),f()])}catch(s){console.error("APPROVE ERROR:",null===s||void 0===s?void 0:s.message),y("\u274c Failed to approve user. Please try again.","error")}finally{r(!1)}}},[d,y,R,f]),C=(0,l.useCallback)(async e=>{if(!d&&window.confirm("Are you sure you want to reject this user?")){r(!0);try{await(0,n.tQ)(e),y("\u26a0\ufe0f User rejected successfully!","warning"),await Promise.all([R(),f()])}catch(s){console.error("REJECT ERROR:",null===s||void 0===s?void 0:s.message),y("\u274c Failed to reject user. Please try again.","error")}finally{r(!1)}}},[d,y,R,f]),P=(0,l.useMemo)(()=>("pending"===g?e:a).filter(e=>{var s,a,t;const l=!m||(null===(s=e.adminname)||void 0===s?void 0:s.toLowerCase().includes(m.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(m.toLowerCase()))||(null===(t=e.id)||void 0===t?void 0:t.toString().includes(m)),n=!p||e.status===p;return l&&n}),[g,e,a,m,p]),k=(0,l.useCallback)(e=>{const s={pending:{class:"status-pending",icon:"\u23f3",text:"Pending"},approved:{class:"status-approved",icon:"\u2705",text:"Approved"},rejected:{class:"status-rejected",icon:"\u274c",text:"Rejected"}}[e]||{class:"status-unknown",icon:"\u2753",text:e};return(0,c.jsxs)("span",{className:"status-badge ".concat(s.class),children:[s.icon," ",s.text]})},[]),S=(0,l.useCallback)(()=>{R(),f()},[R,f]);return(0,c.jsxs)("div",{className:"admin-get-all-data",children:[(0,c.jsxs)("div",{className:"header",children:[(0,c.jsx)("h1",{children:"Admin Approval Dashboard"}),(0,c.jsx)("div",{className:"header-actions",children:(0,c.jsx)("button",{className:"btn btn-secondary",onClick:S,disabled:d,children:d?(0,c.jsx)("div",{className:"spinner"}):"\ud83d\udd04 Refresh"})})]}),(0,c.jsxs)("div",{className:"stats-grid",children:[(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("div",{className:"stat-icon",children:"\u23f3"}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("div",{className:"stat-number",children:b.totalPending}),(0,c.jsx)("div",{className:"stat-label",children:"Pending Approval"})]})]}),(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("div",{className:"stat-number",children:b.totalApproved}),(0,c.jsx)("div",{className:"stat-label",children:"Approved Admins"})]})]}),(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("div",{className:"stat-icon",children:"\u274c"}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("div",{className:"stat-number",children:b.totalRejected}),(0,c.jsx)("div",{className:"stat-label",children:"Rejected Admins"})]})]}),(0,c.jsxs)("div",{className:"stat-card",children:[(0,c.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("div",{className:"stat-number",children:b.totalAll}),(0,c.jsx)("div",{className:"stat-label",children:"Total Admins"})]})]})]}),o&&(0,c.jsx)("div",{className:"message message-".concat(u),children:o}),(0,c.jsxs)("div",{className:"tab-navigation",children:[(0,c.jsxs)("button",{className:"tab-button ".concat("pending"===g?"active":""),onClick:()=>N("pending"),children:["\u23f3 Pending Admins (",b.totalPending,")"]}),(0,c.jsxs)("button",{className:"tab-button ".concat("all"===g?"active":""),onClick:()=>N("all"),children:["\ud83d\udccb All Admins (",b.totalAll,")"]})]}),(0,c.jsx)("div",{className:"search-filter-card",children:(0,c.jsxs)("div",{className:"search-filter-grid",children:[(0,c.jsxs)("div",{className:"search-group",children:[(0,c.jsx)("label",{htmlFor:"search",children:"Search Users"}),(0,c.jsxs)("div",{className:"search-input-wrapper",children:[(0,c.jsx)("input",{id:"search",type:"text",value:m,onChange:e=>v(e.target.value),placeholder:"Search by name, email, or ID..."}),(0,c.jsx)("div",{className:"search-icon",children:"\ud83d\udd0d"})]})]}),"all"===g&&(0,c.jsxs)("div",{className:"filter-group",children:[(0,c.jsx)("label",{htmlFor:"status-filter",children:"Filter by Status"}),(0,c.jsxs)("select",{id:"status-filter",value:p,onChange:e=>x(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"All Statuses"}),(0,c.jsx)("option",{value:"pending",children:"Pending"}),(0,c.jsx)("option",{value:"approved",children:"Approved"}),(0,c.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),(0,c.jsxs)("div",{className:"table-card",children:[(0,c.jsxs)("div",{className:"table-header",children:[(0,c.jsxs)("h3",{children:["pending"===g?"Pending Users":"All Users"," (",P.length,")"]}),(0,c.jsx)("div",{className:"table-actions",children:(0,c.jsxs)("span",{className:"results-info",children:["Showing ",P.length," ","pending"===g?"pending":""," users"]})})]}),d?(0,c.jsxs)("div",{className:"loading-state",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("span",{children:"Loading users..."})]}):0===P.length?(0,c.jsxs)("div",{className:"empty-state",children:[(0,c.jsx)("div",{className:"empty-icon",children:"pending"===g?"\u23f3":"\ud83d\udc65"}),(0,c.jsx)("h3",{children:"pending"===g?"No pending users":"No users found"}),(0,c.jsx)("p",{children:m||p?"Try adjusting your search or filter criteria":"pending"===g?"All users have been processed":"No users available at the moment"})]}):(0,c.jsx)("div",{className:"table-wrapper",children:(0,c.jsxs)("table",{className:"users-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"ID"}),(0,c.jsx)("th",{children:"Admin Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Status"}),"pending"===g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("th",{children:"Approve"}),(0,c.jsx)("th",{children:"Reject"})]})]})}),(0,c.jsx)("tbody",{children:P.map((e,s)=>(0,c.jsxs)("tr",{className:s%2===0?"even-row":"odd-row",children:[(0,c.jsxs)("td",{className:"user-id",children:["#",e.id]}),(0,c.jsx)("td",{className:"user-name",children:e.adminname}),(0,c.jsx)("td",{className:"user-email",children:e.email}),(0,c.jsx)("td",{children:k(e.status)}),"pending"===g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("td",{children:(0,c.jsx)("button",{className:"btn-icon btn-approve",onClick:()=>w(e.id),disabled:d,title:"Approve user",children:"\u2705 Approve"})}),(0,c.jsx)("td",{children:(0,c.jsx)("button",{className:"btn-icon btn-reject",onClick:()=>C(e.id),disabled:d,title:"Reject user",children:"\u274c Reject"})})]})]},e.id))})]})})]})]})}},514:(e,s,a)=>{a.d(s,{LW:()=>h,Oh:()=>c,Qu:()=>j,Rr:()=>o,az:()=>m,jt:()=>d,o2:()=>u,tQ:()=>r,uR:()=>i});var t=a(722),l=a(383);const n="".concat(l.A,"/api/Adminaprovel"),c=()=>t.A.get("".concat(n,"/all")),i=()=>t.A.get("".concat(n,"/pending")),d=e=>t.A.put("".concat(n,"/approve/").concat(e),{}),r=e=>t.A.put("".concat(n,"/reject/").concat(e),{}),o=(e,s)=>t.A.put("".concat(n,"/update/").concat(e),s),h=c,u=e=>t.A.delete("".concat(n,"/delete/").concat(e)),j=d,m=r}}]);
//# sourceMappingURL=331.c68b88fd.chunk.js.map