"use strict";(self.webpackChunkmysite3=self.webpackChunkmysite3||[]).push([[525,829],{525:(e,s,a)=>{a.r(s),a.d(s,{default:()=>r});var l=a(555),i=a(43),n=a(163),t=a(898),c=a(579);const r=function(e){let{onSuccess:s}=e;const a=(0,n.Zp)(),[r,o]=(0,i.useState)({name:"",email:"",mobileNumber:""}),[d,m]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),[v,p]=(0,i.useState)({}),[x,N]=(0,i.useState)(""),[j,b]=(0,i.useState)(0),[g,f]=(0,i.useState)(!1),A=(e,s)=>{o(a=>(0,l.A)((0,l.A)({},a),{},{[e]:"mobileNumber"===e?s.replace(/\D/g,""):s})),v[e]&&p(s=>(0,l.A)((0,l.A)({},s),{},{[e]:""})),m("")};return(0,c.jsxs)("div",{className:"login-container",children:[(0,c.jsxs)("div",{className:"login-header",children:[(0,c.jsx)("h2",{children:"Create Your Account"}),(0,c.jsx)("p",{children:"Fill in your details to get started"})]}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u)return;if(!(()=>{const e={};var s;return r.name.trim()?r.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",r.email.trim()?(s=r.email.trim(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(e.email="Please enter a valid email address")):e.email="Email is required",r.mobileNumber.trim()?/^\d{10}$/.test(r.mobileNumber.trim())||(e.mobileNumber="Mobile number must be exactly 10 digits"):e.mobileNumber="Mobile number is required",p(e),0===Object.keys(e).length})())return void m("Please fix the errors above");h(!0),N("Validating information...");const a=(()=>{b(0);const e=setInterval(()=>{b(s=>s>=90?(clearInterval(e),90):s+15)},200);return e})();try{var l,i;N("Creating your account...");const e={username:r.name.trim(),useremail:r.email.trim(),number:r.mobileNumber.trim()},n=await(0,t.kg)(e);if(clearInterval(a),b(100),N("Account created successfully!"),!0===(null===(l=n.data)||void 0===l?void 0:l.status))return m("\u2705 Account created successfully! Customer ID: ".concat(n.data.customerId)),o({name:"",email:"",mobileNumber:""}),void(s&&setTimeout(()=>{s()},2e3));const c=(null===(i=n.data)||void 0===i?void 0:i.message)||"Unknown backend error";c.toLowerCase().includes("email")?(m("\u26a0 Email address already exists. Please use a different email."),p({email:"This email is already registered"})):c.toLowerCase().includes("number")?(m("\u26a0 Mobile number already exists. Please use a different number."),p({mobileNumber:"This mobile number is already registered"})):m("\u274c Failed: ".concat(c))}catch(v){var n,c,d;clearInterval(a),b(0),console.error("CREATE USER ERROR:",v);let e="Failed to create account";"ECONNABORTED"===v.code?e="Connection timeout. Please try again.":409===(null===(n=v.response)||void 0===n?void 0:n.status)?e="User already exists with this information":null!==(c=v.response)&&void 0!==c&&null!==(d=c.data)&&void 0!==d&&d.message?e=v.response.data.message:navigator.onLine||(e="No internet connection"),m("\u274c ".concat(e)),N("Error occurred")}finally{h(!1)}},className:"login-form",children:[(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,c.jsxs)("div",{className:"input-wrapper",children:[(0,c.jsx)("input",{id:"name",type:"text",value:r.name,onChange:e=>A("name",e.target.value),disabled:u,className:v.name?"error":"",placeholder:"Enter your full name",required:!0}),(0,c.jsx)("div",{className:"input-icon",children:(0,c.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,c.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]}),v.name&&(0,c.jsx)("span",{className:"error-text",children:v.name})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,c.jsxs)("div",{className:"input-wrapper",children:[(0,c.jsx)("input",{id:"email",type:"email",value:r.email,onChange:e=>A("email",e.target.value),disabled:u,className:v.email?"error":"",placeholder:"Enter your email address",required:!0}),(0,c.jsx)("div",{className:"input-icon",children:(0,c.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,c.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})})]}),v.email&&(0,c.jsx)("span",{className:"error-text",children:v.email})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"mobile",children:"Mobile Number"}),(0,c.jsxs)("div",{className:"input-wrapper",children:[(0,c.jsx)("input",{id:"mobile",type:"text",value:r.mobileNumber,onChange:e=>A("mobileNumber",e.target.value),disabled:u,maxLength:"10",className:v.mobileNumber?"error":"",placeholder:"Enter 10-digit mobile number",required:!0}),(0,c.jsx)("div",{className:"input-icon",children:(0,c.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,c.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})})})]}),v.mobileNumber&&(0,c.jsx)("span",{className:"error-text",children:v.mobileNumber})]}),u&&(0,c.jsxs)("div",{className:"loading-section",children:[(0,c.jsxs)("div",{className:"progress-container",children:[(0,c.jsx)("div",{className:"progress-bar",children:(0,c.jsx)("div",{className:"progress-fill",style:{width:"".concat(j,"%")}})}),(0,c.jsxs)("div",{className:"progress-text",children:[j,"%"]})]}),(0,c.jsx)("div",{className:"step-text",children:x})]}),(0,c.jsx)("button",{type:"submit",disabled:u,className:"submit-button",children:u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"spinner"}),"Creating Account..."]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,c.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Create Account"]})})]}),d&&(0,c.jsx)("div",{className:"message ".concat(d.startsWith("\u2705")?"success":d.startsWith("\u26a0")?"warning":"error"),children:d}),(0,c.jsxs)("div",{className:"more-options-section",children:[(0,c.jsxs)("button",{className:"more-options-toggle",onClick:()=>f(!g),children:[g?"\u25bc":"\u25b6"," More Options"]}),g&&(0,c.jsxs)("div",{className:"more-options-content",children:[(0,c.jsxs)("div",{className:"option-item",onClick:()=>a("/fix-my-speaker"),children:[(0,c.jsx)("div",{className:"option-icon",children:"\ud83d\udd0a"}),(0,c.jsxs)("div",{className:"option-details",children:[(0,c.jsx)("h4",{children:"Fix My Speaker"}),(0,c.jsx)("p",{children:"Audio-based speaker repair tool"})]})]}),(0,c.jsxs)("div",{className:"option-item",onClick:()=>a("/AdminLoginPage"),children:[(0,c.jsx)("div",{className:"option-icon",children:"\ud83d\udc6e"}),(0,c.jsxs)("div",{className:"option-details",children:[(0,c.jsx)("h4",{children:"Admin Login"}),(0,c.jsx)("p",{children:"Access admin dashboard"})]})]}),(0,c.jsxs)("div",{className:"option-item",onClick:()=>a("/Helpall"),children:[(0,c.jsx)("div",{className:"option-icon",children:"\u2753"}),(0,c.jsxs)("div",{className:"option-details",children:[(0,c.jsx)("h4",{children:"Help & Support"}),(0,c.jsx)("p",{children:"Get assistance and FAQ"})]})]})]})]})]})}},736:(e,s,a)=>{a.d(s,{EY:()=>o,Jo:()=>r,bN:()=>c,qp:()=>m,tx:()=>d});var l=a(722),i=a(383);const n="".concat(i.A,"/api/googleinfo"),t="".concat(i.A,"/api/Adminaprovel"),c=e=>l.A.post("".concat(t,"/login"),e),r=e=>l.A.post("".concat(t,"/register"),e),o=e=>l.A.post("".concat(n),e),d=()=>l.A.get("".concat(n)),m=e=>l.A.delete("".concat(n,"/").concat(e))},829:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var l=a(555),i=a(43),n=a(163),t=a(525),c=a(898),r=a(736),o=a(579);const d=function(){var e;const s=(0,n.zy)(),a=(0,n.Zp)(),d="GOOGLE"===(null===(e=s.state)||void 0===e?void 0:e.authProvider),[m,u]=(0,i.useState)(null),[h,v]=(0,i.useState)(""),[p,x]=(0,i.useState)("profile"),[N,j]=(0,i.useState)({update:!1,delete:!1,logout:!1,custom:!1,downloadData:!1});(0,i.useEffect)(()=>{if(s.state)if(d){const e=s.state;u(e),localStorage.setItem("googleUser",JSON.stringify(e)),localStorage.setItem("headerUser",JSON.stringify({name:e.name,email:e.email,image:e.picture,authProvider:"GOOGLE"}))}else{const{number:e}=s.state;(0,c.WE)(e).then(e=>{var s;const a=(null===(s=e.data)||void 0===s?void 0:s.data)||e.data;u(a),localStorage.setItem("headerUser",JSON.stringify({name:a.username,email:a.useremail,image:null,authProvider:"MANUAL"}))}).catch(()=>v("\u274c Failed to fetch profile details"))}else a("/login",{replace:!0})},[s.state,a,d]);const b=()=>{localStorage.removeItem("googleUser"),localStorage.removeItem("headerUser"),a("/",{replace:!0})};return(0,o.jsxs)("div",{className:"login-edit-full-v2",children:[(0,o.jsx)("div",{className:"le-background-glow"}),(0,o.jsxs)("div",{className:"le-container",children:[(0,o.jsxs)("div",{className:"le-header",children:[(0,o.jsxs)("div",{className:"le-avatar-wrapper",children:[(0,o.jsx)("img",{src:(null===m||void 0===m?void 0:m.picture)||"https://img.icons8.com/bubbles/200/000000/user.png",alt:"Profile",className:"le-avatar",onError:e=>e.target.src="https://img.icons8.com/bubbles/200/000000/user.png"}),(0,o.jsx)("div",{className:"le-status-dot ".concat("ONLINE"===(null===m||void 0===m?void 0:m.status)?"online":"offline")})]}),(0,o.jsxs)("h1",{className:"le-welcome",children:["Welcome Back, ",(null===m||void 0===m?void 0:m.name)||(null===m||void 0===m?void 0:m.username)||"Explorer"]}),(0,o.jsx)("p",{className:"le-email-sub",children:(null===m||void 0===m?void 0:m.email)||(null===m||void 0===m?void 0:m.useremail)})]}),(0,o.jsxs)("div",{className:"le-tabs",children:[(0,o.jsx)("button",{className:"le-tab-btn ".concat("profile"===p?"active":""),onClick:()=>x("profile"),children:"Profile Overview"}),(0,o.jsx)("button",{className:"le-tab-btn ".concat("actions"===p?"active":""),onClick:()=>x("actions"),children:"Account Actions"})]}),(0,o.jsx)("div",{className:"le-content",children:"profile"===p?(0,o.jsxs)("div",{className:"le-profile-grid",children:[(0,o.jsxs)("div",{className:"le-info-card",children:[(0,o.jsx)("span",{className:"le-info-label",children:"Identity ID"}),(0,o.jsx)("span",{className:"le-info-value highlight",children:null!==m&&void 0!==m&&m.customerId?m.customerId:null!==m&&void 0!==m&&m.id?"ID-"+m.id:"ID-Pending"})]}),(0,o.jsxs)("div",{className:"le-info-card",children:[(0,o.jsx)("span",{className:"le-info-label",children:"Auth Provider"}),(0,o.jsx)("span",{className:"le-info-value",children:(null===m||void 0===m?void 0:m.authProvider)||"MANUAL"})]}),(0,o.jsxs)("div",{className:"le-info-card",children:[(0,o.jsx)("span",{className:"le-info-label",children:"Mobile Reference"}),(0,o.jsx)("span",{className:"le-info-value",children:(null===m||void 0===m?void 0:m.number)||"N/A"})]}),(0,o.jsxs)("div",{className:"le-info-card",children:[(0,o.jsx)("span",{className:"le-info-label",children:"Current Status"}),(0,o.jsx)("span",{className:"le-info-value status-online",children:(null===m||void 0===m?void 0:m.status)||"ONLINE"})]}),(0,o.jsxs)("div",{className:"le-info-card full-width",children:[(0,o.jsx)("span",{className:"le-info-label",children:"Geospatial Location"}),(0,o.jsx)("span",{className:"le-info-value",children:null!==m&&void 0!==m&&m.latitude?"\ud83d\udccd ".concat(m.latitude.toFixed(4),", ").concat(m.longitude.toFixed(4)):"\u274c Coordinates not shared"})]}),(0,o.jsxs)("div",{className:"le-info-card",children:[(0,o.jsx)("span",{className:"le-info-label",children:"dashboard "}),(0,o.jsxs)("center",{children:["   ",(0,o.jsx)("span",{className:"le-info-value status-online",children:(0,o.jsx)("a",{href:"/dashboard",children:"dashboard"})})]})]})]}):(0,o.jsxs)("div",{className:"le-actions-grid",children:[(0,o.jsxs)(n.N_,{to:"/dashboard",className:"le-action-btn dashboard",children:[(0,o.jsx)("span",{className:"icon",children:"\ud83d\udcca"}),(0,o.jsxs)("div",{className:"text-wrap",children:[(0,o.jsx)("span",{className:"title",children:"Go to Dashboard"}),(0,o.jsx)("span",{className:"desc",children:"View your activity & stats"})]})]}),(0,o.jsxs)("button",{className:"le-action-btn create",onClick:()=>j((0,l.A)((0,l.A)({},N),{},{custom:!0})),children:[(0,o.jsx)("span",{className:"icon",children:"\ud83d\udc64"}),(0,o.jsxs)("div",{className:"text-wrap",children:[(0,o.jsx)("span",{className:"title",children:"Create User"}),(0,o.jsx)("span",{className:"desc",children:"Register a new sub-account"})]})]}),(0,o.jsxs)(n.N_,{to:"/UpdateUser",state:{number:null===m||void 0===m?void 0:m.number},className:"le-action-btn update",children:[(0,o.jsx)("span",{className:"icon",children:"\u270f\ufe0f"}),(0,o.jsxs)("div",{className:"text-wrap",children:[(0,o.jsx)("span",{className:"title",children:"Update Profile"}),(0,o.jsx)("span",{className:"desc",children:"Edit your personal details"})]})]}),(0,o.jsxs)("button",{className:"le-action-btn download",onClick:()=>{var e,s;const a=document.createElement("canvas"),l=a.getContext("2d");a.width=800,a.height=1e3;const i=l.createLinearGradient(0,0,800,1e3);i.addColorStop(0,"#4f46e5"),i.addColorStop(1,"#7c3aed"),l.fillStyle=i,l.fillRect(0,0,800,1e3),l.fillStyle="white",l.beginPath(),l.roundRect(50,50,700,900,30),l.fill(),l.fillStyle="#1e293b",l.font="bold 40px Arial",l.textAlign="center",l.fillText("USER IDENTITY CARD",400,150),l.font="30px Arial",l.textAlign="left";let n=250;const t=(e,s)=>{l.fillStyle="#64748b",l.fillText(e+":",100,n),l.fillStyle="#1e293b",l.fillText(s||"N/A",350,n),n+=80};t("Name",(null===m||void 0===m?void 0:m.name)||(null===m||void 0===m?void 0:m.username)),t("Email",(null===m||void 0===m?void 0:m.email)||(null===m||void 0===m?void 0:m.useremail)),t("Provider",(null===m||void 0===m?void 0:m.authProvider)||"MANUAL"),t("ID",(null===m||void 0===m?void 0:m.customerId)||"ID-"+(null===m||void 0===m?void 0:m.id)),t("Number",(null===m||void 0===m?void 0:m.number)||"N/A"),t("Status",(null===m||void 0===m?void 0:m.status)||"ONLINE"),t("Latitude",(null===m||void 0===m||null===(e=m.latitude)||void 0===e?void 0:e.toString())||"N/A"),t("Longitude",(null===m||void 0===m||null===(s=m.longitude)||void 0===s?void 0:s.toString())||"N/A"),l.fillStyle="#10b981",l.font="bold 20px Arial",l.fillText("\u2713 VERIFIED USER",100,n+50);const c=document.createElement("a");c.download="User-Identity-".concat(null===m||void 0===m?void 0:m.id,".png"),c.href=a.toDataURL(),c.click(),v("\u2705 Identity data downloaded!")},children:[(0,o.jsx)("span",{className:"icon",children:"\ud83d\udce5"}),(0,o.jsxs)("div",{className:"text-wrap",children:[(0,o.jsx)("span",{className:"title",children:"Download Data"}),(0,o.jsx)("span",{className:"desc",children:"Get your identity card image"})]})]}),(0,o.jsxs)("button",{className:"le-action-btn delete",onClick:()=>j((0,l.A)((0,l.A)({},N),{},{delete:!0})),children:[(0,o.jsx)("span",{className:"icon",children:"\ud83d\uddd1\ufe0f"}),(0,o.jsxs)("div",{className:"text-wrap",children:[(0,o.jsx)("span",{className:"title",children:"Delete Account"}),(0,o.jsx)("span",{className:"desc",children:"Permanently remove profile"})]})]}),(0,o.jsxs)("button",{className:"le-action-btn logout",onClick:()=>j((0,l.A)((0,l.A)({},N),{},{logout:!0})),children:[(0,o.jsx)("span",{className:"icon",children:"\ud83d\udeaa"}),(0,o.jsxs)("div",{className:"text-wrap",children:[(0,o.jsx)("span",{className:"title",children:"Secure Logout"}),(0,o.jsx)("span",{className:"desc",children:"End your current session"})]})]})]})}),h&&(0,o.jsx)("div",{className:"le-toast",children:h})]}),N.custom&&(0,o.jsx)("div",{className:"le-popup-overlay",children:(0,o.jsxs)("div",{className:"le-popup-box large",children:[(0,o.jsxs)("div",{className:"le-popup-head",children:[(0,o.jsx)("h3",{children:"Create New User"}),(0,o.jsx)("button",{className:"close-btn",onClick:()=>j((0,l.A)((0,l.A)({},N),{},{custom:!1})),children:"\xd7"})]}),(0,o.jsx)("div",{className:"le-popup-body scrollable",children:(0,o.jsx)(t.default,{})})]})}),N.logout&&(0,o.jsx)("div",{className:"le-popup-overlay",children:(0,o.jsxs)("div",{className:"le-popup-box",children:[(0,o.jsx)("h3",{children:"Terminate Session?"}),(0,o.jsx)("p",{children:"You will need to sign back in to access your data."}),(0,o.jsxs)("div",{className:"le-popup-footer",children:[(0,o.jsx)("button",{className:"btn-cancel",onClick:()=>j((0,l.A)((0,l.A)({},N),{},{logout:!1})),children:"Cancel"}),(0,o.jsx)("button",{className:"btn-confirm logout",onClick:b,children:"Logout"})]})]})}),N.delete&&(0,o.jsx)("div",{className:"le-popup-overlay",children:(0,o.jsxs)("div",{className:"le-popup-box",children:[(0,o.jsx)("h3",{children:"Confirm Deletion"}),(0,o.jsx)("p",{className:"warning",children:"This action is permanent and cannot be reversed."}),(0,o.jsxs)("div",{className:"le-popup-footer",children:[(0,o.jsx)("button",{className:"btn-cancel",onClick:()=>j((0,l.A)((0,l.A)({},N),{},{delete:!1})),children:"Abort"}),(0,o.jsx)("button",{className:"btn-confirm delete",onClick:async()=>{try{d?await(0,r.qp)(m.googleId):await(0,c.hG)(m.number),b()}catch(e){v("\u274c Deletion failed")}},children:"Delete Permanently"})]})]})})]})}},898:(e,s,a)=>{a.d(s,{CF:()=>c,Og:()=>m,TK:()=>o,WE:()=>r,hG:()=>d,kg:()=>t});var l=a(722),i=a(383);const n="".concat(i.A,"/api/users"),t=e=>l.A.post("".concat(n,"/create"),e),c=()=>l.A.get("".concat(n,"/all")),r=e=>l.A.get("".concat(n,"/getbynumber/").concat(e)),o=(e,s)=>l.A.put("".concat(n,"/update/").concat(e),s),d=e=>l.A.delete("".concat(n,"/delete/").concat(e)),m=(e,s)=>l.A.post("".concat(n,"/check"),{email:e,number:s})}}]);
//# sourceMappingURL=829.de8d652b.chunk.js.map