{"version":3,"file":"static/js/64.f0efa58b.chunk.js","mappings":"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","sources":["myproject/Userdata/UpdateUser.js","api/user/userApi.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport \"./UpdateUser.css\";\nimport { getUserByNumber, updateUser } from \"../../api/user/userApi\";\n\nfunction UpdateUser() {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // Try to get number from state or local storage as fallback\n  const number = location.state?.number || localStorage.getItem(\"userNumber\");\n\n  const [form, setForm] = useState({\n    username: \"\",\n    useremail: \"\",\n    customerId: \"\",\n    number: \"\",\n  });\n\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [fetchLoading, setFetchLoading] = useState(true);\n  const [errors, setErrors] = useState({});\n  const [step, setStep] = useState(\"\");\n\n  useEffect(() => {\n    if (!number) {\n      setMessage(\"⚠ User reference missing. Redirecting...\");\n      setTimeout(() => navigate(\"/login\", { replace: true }), 2000);\n    }\n  }, [number, navigate]);\n\n  useEffect(() => {\n    if (!number) return;\n\n    const fetchUser = async () => {\n      setFetchLoading(true);\n      setStep(\"Fetching profile...\");\n      try {\n        const res = await getUserByNumber(number);\n        const data = res.data?.data;\n        if (data) {\n          setForm({\n            username: data.username || \"\",\n            useremail: data.useremail || \"\",\n            customerId: data.customerId || \"\",\n            number: data.number || \"\",\n          });\n          setStep(\"Profile loaded\");\n        } else {\n          setMessage(\"❌ Account not found\");\n        }\n      } catch (err) {\n        console.error(\"Fetch error:\", err);\n        setMessage(\"❌ Failed to load user data\");\n      } finally {\n        setFetchLoading(false);\n      }\n    };\n    fetchUser();\n  }, [number]);\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!form.username) newErrors.username = \"Name is required\";\n    if (!form.useremail) newErrors.useremail = \"Email is required\";\n    if (!form.number) newErrors.number = \"Number is required\";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n\n    setLoading(true);\n    setStep(\"Saving changes...\");\n    try {\n      const res = await updateUser(number, form);\n      if (res.data.status) {\n        setMessage(\"✅ Updated successfully!\");\n        setTimeout(() => navigate(\"/LoginEdit\", { state: res.data.data }), 1500);\n      } else {\n        setMessage(\"❌ Update failed: \" + res.data.message);\n      }\n    } catch (err) {\n      console.error(\"Update error:\", err);\n      setMessage(\"❌ Communication error with server\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (fetchLoading) return <div className=\"update-container\"><div className=\"loading-spinner\"></div><p>{step}</p></div>;\n\n  return (\n    <div className=\"update-container-premium\">\n      <div className=\"update-glass-card\">\n        <button className=\"back-btn\" onClick={() => navigate(-1)}>← Back</button>\n        <h2>Edit Profile Information</h2>\n        <p className=\"subtitle\">ID: {form.customerId}</p>\n\n        <form onSubmit={handleUpdate}>\n          <div className=\"input-field\">\n            <label>Full Name</label>\n            <input\n              name=\"username\"\n              value={form.username}\n              onChange={(e) => setForm({ ...form, username: e.target.value })}\n              placeholder=\"Your Name\"\n            />\n            {errors.username && <span className=\"error\">{errors.username}</span>}\n          </div>\n\n          <div className=\"input-field\">\n            <label>Email Address</label>\n            <input\n              name=\"useremail\"\n              value={form.useremail}\n              onChange={(e) => setForm({ ...form, useremail: e.target.value })}\n              placeholder=\"email@example.com\"\n            />\n            {errors.useremail && <span className=\"error\">{errors.useremail}</span>}\n          </div>\n\n          <div className=\"input-field\">\n            <label>Mobile Number</label>\n            <input\n              name=\"number\"\n              value={form.number}\n              disabled\n              title=\"Mobile number cannot be changed\"\n            />\n          </div>\n\n          <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n            {loading ? \"Updating...\" : \"Save Changes ✨\"}\n          </button>\n        </form>\n\n        {message && <div className={`message-banner ${message.includes('✅') ? 'success' : 'error'}`}>{message}</div>}\n      </div>\n    </div>\n  );\n}\n\nexport default UpdateUser;\n","import axios from \"axios\";\r\nimport BACKUP_API from \"../../myproject/config/apiConfig\";\r\n\r\nconst USERS_API = `${BACKUP_API}/api/users`;\r\n\r\nexport const createUser = (userData) => axios.post(`${USERS_API}/create`, userData);\r\nexport const getAllUsers = () => axios.get(`${USERS_API}/all`);\r\nexport const getUserByNumber = (number) => axios.get(`${USERS_API}/getbynumber/${number}`);\r\nexport const getUserById = (id) => axios.get(`${USERS_API}/getbyid/${id}`);\r\nexport const updateUser = (number, userData) => axios.put(`${USERS_API}/update/${number}`, userData);\r\nexport const deleteUser = (number) => axios.delete(`${USERS_API}/delete/${number}`);\r\nexport const getOnlineUsers = () => axios.get(`${USERS_API}/online`);\r\n\r\n// Deprecated or mapped functions\r\nexport const checkUser = (email, number) => axios.post(`${USERS_API}/check`, { email, number });\r\nexport const createUserService = createUser;\r\nexport const updateUserService = updateUser;\r\nexport const deleteUserService = deleteUser;\r\n"],"names":["_location$state","location","useLocation","navigate","useNavigate","number","state","localStorage","getItem","form","setForm","useState","username","useremail","customerId","message","setMessage","loading","setLoading","fetchLoading","setFetchLoading","errors","setErrors","step","setStep","useEffect","setTimeout","replace","async","_res$data","data","getUserByNumber","err","console","error","fetchUser","_jsxs","className","children","_jsx","onClick","onSubmit","e","preventDefault","validateForm","newErrors","Object","keys","length","res","updateUser","status","name","value","onChange","_objectSpread","target","placeholder","disabled","title","type","concat","includes","USERS_API","BACKUP_API","createUser","userData","axios","post","getAllUsers","get","put","deleteUser","delete","checkUser","email"],"ignoreList":[],"sourceRoot":""}