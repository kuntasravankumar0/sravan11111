"use strict";(self.webpackChunkmysite3=self.webpackChunkmysite3||[]).push([[94],{94:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var t=s(555),l=s(43),n=s(898),r=s(736),c=s(472),i=s(579);function d(){const[e,a]=(0,l.useState)([]),[s,d]=(0,l.useState)([]),[u,o]=(0,l.useState)("regular"),[m,h]=(0,l.useState)(null),[x,j]=(0,l.useState)(!1),[g,v]=(0,l.useState)(""),[N,p]=(0,l.useState)([]),[b,A]=(0,l.useState)(!1),[y,C]=(0,l.useState)({username:"",useremail:"",name:"",email:"",number:"",status:"OFFLINE",authProvider:"MANUAL",latitude:0,longitude:0}),[F,f]=(0,l.useState)(!1),I=(0,l.useMemo)(()=>({regular:Array.isArray(e)?e.length:0,google:Array.isArray(s)?s.length:0,total:(Array.isArray(e)?e.length:0)+(Array.isArray(s)?s.length:0),online:Array.isArray(N)?N.length:0}),[e,s,N]),w=(0,l.useMemo)(()=>{let a="regular"===u?Array.isArray(e)?e:[]:Array.isArray(s)?s:[];return b&&(a=a.filter(e=>e&&"ONLINE"===e.status)),a.filter(e=>{if(!e)return!1;const a=(e.username||e.name||"").toLowerCase(),s=(e.useremail||e.email||"").toLowerCase(),t=(e.number||e.googleId||"").toString(),l=(g||"").toLowerCase();return a.includes(l)||s.includes(l)||t.includes(l)})},[e,s,u,g,b]),k=(0,l.useCallback)(async()=>{j(!0);try{var e,s;const[t,l,i]=await Promise.all([(0,n.CF)().catch(()=>({data:[]})),(0,r.tx)().catch(()=>({data:{data:[]}})),(0,c.qO)().catch(()=>({data:{data:[]}}))]);a(Array.isArray(t.data)?t.data:[]);const u=(null===(e=l.data)||void 0===e?void 0:e.data)||l.data;d(Array.isArray(u)?u:[]);const o=(null===(s=i.data)||void 0===s?void 0:s.data)||i.data;p(Array.isArray(o)?o:[])}catch(t){console.error("Fetch error:",t)}finally{j(!1)}},[]);(0,l.useEffect)(()=>{k();const e=setInterval(k,15e3);return()=>clearInterval(e)},[k]);const E=async e=>{const a=!!e.googleId,s=a?e.googleId:e.number;if(window.confirm("Delete ".concat(a?"Google":"Regular"," user ").concat(s,"?"))){j(!0);try{a?await(0,r.qp)(s):await(0,n.hG)(s),await k(),alert("User deleted successfully.")}catch(c){var t,l;alert("Failed to delete user: "+((null===(t=c.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||c.message))}finally{j(!1)}}},L=e=>{h(e.id||e.googleId||e.number),C((0,t.A)((0,t.A)({},e),{},{username:e.username||"",useremail:e.useremail||"",name:e.name||"",email:e.email||"",number:e.number||"",status:e.status||"OFFLINE"}))},O=async()=>{j(!0);try{"regular"===u?await(0,n.TK)(y.number,y):await(0,r.EY)((0,t.A)((0,t.A)({},y),{},{googleId:y.googleId,name:y.name,email:y.email})),h(null),await k(),alert("Record updated successfully!")}catch(s){var e,a;alert("Update failed: "+((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||s.message))}finally{j(!1)}},S=(e,a)=>null===e||null===a||void 0===e||void 0===a?"Unknown":"\ud83d\udccd ".concat(parseFloat(e).toFixed(3),", ").concat(parseFloat(a).toFixed(3));return(0,i.jsxs)("div",{className:"user-management-premium",children:[(0,i.jsxs)("div",{className:"um-header",children:[(0,i.jsxs)("div",{className:"um-title",children:[(0,i.jsx)("h1",{children:"Identity Control Center \ud83d\udee1\ufe0f"}),(0,i.jsx)("p",{children:"Global oversight of Manual and Google authenticated accounts."})]}),(0,i.jsxs)("div",{className:"um-stats",children:[(0,i.jsxs)("div",{className:"um-stat-item",children:[(0,i.jsx)("span",{className:"count",children:I.total}),(0,i.jsx)("span",{className:"label",children:"Accounts"})]}),(0,i.jsx)("div",{className:"um-stat-divider"}),(0,i.jsxs)("div",{className:"um-stat-item online",children:[(0,i.jsxs)("span",{className:"count",children:["\u26a1 ",I.online]}),(0,i.jsx)("span",{className:"label",children:"Live Pulse"})]})]})]}),(0,i.jsxs)("div",{className:"um-controls",children:[(0,i.jsxs)("div",{className:"tab-group-container",children:[(0,i.jsxs)("div",{className:"tab-group",children:[(0,i.jsx)("button",{className:"tab-btn ".concat("regular"===u?"active":""),onClick:()=>{o("regular"),h(null)},children:"Manual Core"}),(0,i.jsx)("button",{className:"tab-btn ".concat("google"===u?"active":""),onClick:()=>{o("google"),h(null)},children:"Google OAuth"})]}),(0,i.jsx)("button",{className:"um-add-btn",onClick:()=>{C({username:"",number:"",useremail:"",status:"OFFLINE"}),f(!0)},children:"\u2795 Add Manual User"})]}),(0,i.jsxs)("div",{className:"um-filters",children:[(0,i.jsxs)("label",{className:"toggle-switch",children:[(0,i.jsx)("input",{type:"checkbox",checked:b,onChange:()=>A(!b)}),(0,i.jsx)("span",{className:"slider round"}),(0,i.jsx)("span",{className:"toggle-label",children:"Active Only"})]}),(0,i.jsxs)("div",{className:"search-wrap",children:[(0,i.jsx)("input",{type:"text",placeholder:"Filter by name, ID, or email...",value:g,onChange:e=>v(e.target.value)}),(0,i.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]})]})]}),F&&(0,i.jsx)("div",{className:"um-add-overlay",children:(0,i.jsxs)("div",{className:"um-add-modal",children:[(0,i.jsx)("h3",{children:"Register Manual Account"}),(0,i.jsxs)("div",{className:"um-form-row",children:[(0,i.jsx)("input",{placeholder:"Full Name",value:y.username,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{username:e.target.value}))}),(0,i.jsx)("input",{placeholder:"Mobile Number",value:y.number,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{number:e.target.value}))})]}),(0,i.jsx)("input",{placeholder:"Email Address (Optional)",value:y.useremail,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{useremail:e.target.value}))}),(0,i.jsxs)("div",{className:"um-modal-actions",children:[(0,i.jsx)("button",{onClick:async()=>{if(y.username&&y.number){j(!0);try{await(0,n.kg)({username:y.username,useremail:y.useremail||y.username.toLowerCase()+"@example.com",number:y.number,password:"DefaultPassword123!",authProvider:"MANUAL",status:"OFFLINE"}),f(!1),await k(),alert("Manual user created successfully!")}catch(s){var e,a;alert("Creation failed: "+((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||s.message))}finally{j(!1)}}else alert("Name and Number are required.")},className:"um-btn save",children:"Create User"}),(0,i.jsx)("button",{onClick:()=>f(!1),className:"um-btn cancel",children:"Cancel"})]})]})}),(0,i.jsxs)("div",{className:"um-table-container",children:[x&&(0,i.jsx)("div",{className:"um-loading-overlay",children:"Syncing with server..."}),(0,i.jsxs)("table",{className:"um-table",children:[(0,i.jsx)("thead",{children:"regular"===u?(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Profile"}),(0,i.jsx)("th",{children:"Identity"}),(0,i.jsx)("th",{children:"Mobile"}),(0,i.jsx)("th",{children:"Geo-Location"}),(0,i.jsx)("th",{children:"Presence"}),(0,i.jsx)("th",{children:"Management"})]}):(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Identity"}),(0,i.jsx)("th",{children:"OAuth Name"}),(0,i.jsx)("th",{children:"OAuth Email"}),(0,i.jsx)("th",{children:"Geo-Location"}),(0,i.jsx)("th",{children:"Presence"}),(0,i.jsx)("th",{children:"Management"})]})}),(0,i.jsx)("tbody",{children:0===w.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"6",className:"um-empty-td",children:(0,i.jsxs)("div",{className:"um-empty-state",children:[(0,i.jsx)("span",{children:"\ud83d\udced"}),(0,i.jsx)("p",{children:"No users match your current filter or selected tab."})]})})}):w.map(e=>{var a;const s=e.id||e.googleId||e.number,l=m===s;return(0,i.jsx)("tr",{className:l?"editing-row":"",children:"regular"===u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"um-avatar-mini",children:null===(a=e.username)||void 0===a?void 0:a.charAt(0)})}),(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"um-name-field",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{value:y.username,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{username:e.target.value})),className:"um-edit-input"}),(0,i.jsx)("input",{value:y.useremail,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{useremail:e.target.value})),className:"um-edit-input"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"name",children:e.username}),(0,i.jsx)("span",{className:"email",children:e.useremail})]})})}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"um-value",children:e.number})}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"um-location-chip",children:S(e.latitude,e.longitude)})}),(0,i.jsx)("td",{children:l?(0,i.jsxs)("select",{value:y.status,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{status:e.target.value})),className:"um-edit-select",children:[(0,i.jsx)("option",{value:"ONLINE",children:"ONLINE"}),(0,i.jsx)("option",{value:"OFFLINE",children:"OFFLINE"})]}):(0,i.jsx)("div",{className:"um-status-badge ".concat("ONLINE"===e.status?"online":"offline"),children:e.status})}),(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"um-actions",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:O,className:"um-btn save",children:"Save"}),(0,i.jsx)("button",{onClick:()=>h(null),className:"um-btn cancel",children:"X"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>L(e),className:"um-btn edit",title:"Edit User",children:"\u270f\ufe0f"}),(0,i.jsx)("button",{onClick:()=>E(e),className:"um-btn delete",title:"Delete User",children:"\ud83d\uddd1\ufe0f"})]})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{children:(0,i.jsx)("img",{src:e.picture||"https://via.placeholder.com/40",alt:"",className:"um-avatar-img",onError:e=>e.target.src="https://img.icons8.com/bubbles/100/000000/user.png"})}),(0,i.jsx)("td",{children:l?(0,i.jsx)("input",{value:y.name,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{name:e.target.value})),className:"um-edit-input"}):(0,i.jsx)("span",{className:"name",children:e.name})}),(0,i.jsx)("td",{children:l?(0,i.jsx)("input",{value:y.email,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{email:e.target.value})),className:"um-edit-input"}):(0,i.jsx)("span",{className:"email",children:e.email})}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"um-location-chip",children:S(e.latitude,e.longitude)})}),(0,i.jsx)("td",{children:l?(0,i.jsxs)("select",{value:y.status,onChange:e=>C((0,t.A)((0,t.A)({},y),{},{status:e.target.value})),className:"um-edit-select",children:[(0,i.jsx)("option",{value:"ONLINE",children:"ONLINE"}),(0,i.jsx)("option",{value:"OFFLINE",children:"OFFLINE"})]}):(0,i.jsx)("div",{className:"um-status-badge ".concat("ONLINE"===e.status?"online":"offline"),children:e.status})}),(0,i.jsx)("td",{children:(0,i.jsx)("div",{className:"um-actions",children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:O,className:"um-btn save",children:"Save"}),(0,i.jsx)("button",{onClick:()=>h(null),className:"um-btn cancel",children:"X"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>L(e),className:"um-btn edit",title:"Edit User",children:"\u270f\ufe0f"}),(0,i.jsx)("button",{onClick:()=>E(e),className:"um-btn delete",title:"Delete User",children:"\ud83d\uddd1\ufe0f"})]})})})]})},s)})})]})]})]})}},736:(e,a,s)=>{s.d(a,{EY:()=>d,Jo:()=>i,bN:()=>c,qp:()=>o,tx:()=>u});var t=s(722),l=s(383);const n="".concat(l.A,"/api/googleinfo"),r="".concat(l.A,"/api/Adminaprovel"),c=e=>t.A.post("".concat(r,"/login"),e),i=e=>t.A.post("".concat(r,"/register"),e),d=e=>t.A.post("".concat(n),e),u=()=>t.A.get("".concat(n)),o=e=>t.A.delete("".concat(n,"/").concat(e))},898:(e,a,s)=>{s.d(a,{CF:()=>c,Og:()=>o,TK:()=>d,WE:()=>i,hG:()=>u,kg:()=>r});var t=s(722),l=s(383);const n="".concat(l.A,"/api/users"),r=e=>t.A.post("".concat(n,"/create"),e),c=()=>t.A.get("".concat(n,"/all")),i=e=>t.A.get("".concat(n,"/getbynumber/").concat(e)),d=(e,a)=>t.A.put("".concat(n,"/update/").concat(e),a),u=e=>t.A.delete("".concat(n,"/delete/").concat(e)),o=(e,a)=>t.A.post("".concat(n,"/check"),{email:e,number:a})}}]);
//# sourceMappingURL=94.ca6311b9.chunk.js.map