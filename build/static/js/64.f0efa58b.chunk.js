"use strict";(self.webpackChunkmysite3=self.webpackChunkmysite3||[]).push([[64],{64:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var r=s(555),t=s(43),n=s(163),i=s(898),l=s(579);const c=function(){var e;const a=(0,n.zy)(),s=(0,n.Zp)(),c=(null===(e=a.state)||void 0===e?void 0:e.number)||localStorage.getItem("userNumber"),[u,d]=(0,t.useState)({username:"",useremail:"",customerId:"",number:""}),[m,o]=(0,t.useState)(""),[h,b]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!0),[f,v]=(0,t.useState)({}),[j,x]=(0,t.useState)("");return(0,t.useEffect)(()=>{c||(o("\u26a0 User reference missing. Redirecting..."),setTimeout(()=>s("/login",{replace:!0}),2e3))},[c,s]),(0,t.useEffect)(()=>{if(!c)return;(async()=>{g(!0),x("Fetching profile...");try{var e;const a=null===(e=(await(0,i.WE)(c)).data)||void 0===e?void 0:e.data;a?(d({username:a.username||"",useremail:a.useremail||"",customerId:a.customerId||"",number:a.number||""}),x("Profile loaded")):o("\u274c Account not found")}catch(a){console.error("Fetch error:",a),o("\u274c Failed to load user data")}finally{g(!1)}})()},[c]),p?(0,l.jsxs)("div",{className:"update-container",children:[(0,l.jsx)("div",{className:"loading-spinner"}),(0,l.jsx)("p",{children:j})]}):(0,l.jsx)("div",{className:"update-container-premium",children:(0,l.jsxs)("div",{className:"update-glass-card",children:[(0,l.jsx)("button",{className:"back-btn",onClick:()=>s(-1),children:"\u2190 Back"}),(0,l.jsx)("h2",{children:"Edit Profile Information"}),(0,l.jsxs)("p",{className:"subtitle",children:["ID: ",u.customerId]}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return u.username||(e.username="Name is required"),u.useremail||(e.useremail="Email is required"),u.number||(e.number="Number is required"),v(e),0===Object.keys(e).length})()){b(!0),x("Saving changes...");try{const e=await(0,i.TK)(c,u);e.data.status?(o("\u2705 Updated successfully!"),setTimeout(()=>s("/LoginEdit",{state:e.data.data}),1500)):o("\u274c Update failed: "+e.data.message)}catch(a){console.error("Update error:",a),o("\u274c Communication error with server")}finally{b(!1)}}},children:[(0,l.jsxs)("div",{className:"input-field",children:[(0,l.jsx)("label",{children:"Full Name"}),(0,l.jsx)("input",{name:"username",value:u.username,onChange:e=>d((0,r.A)((0,r.A)({},u),{},{username:e.target.value})),placeholder:"Your Name"}),f.username&&(0,l.jsx)("span",{className:"error",children:f.username})]}),(0,l.jsxs)("div",{className:"input-field",children:[(0,l.jsx)("label",{children:"Email Address"}),(0,l.jsx)("input",{name:"useremail",value:u.useremail,onChange:e=>d((0,r.A)((0,r.A)({},u),{},{useremail:e.target.value})),placeholder:"email@example.com"}),f.useremail&&(0,l.jsx)("span",{className:"error",children:f.useremail})]}),(0,l.jsxs)("div",{className:"input-field",children:[(0,l.jsx)("label",{children:"Mobile Number"}),(0,l.jsx)("input",{name:"number",value:u.number,disabled:!0,title:"Mobile number cannot be changed"})]}),(0,l.jsx)("button",{type:"submit",className:"submit-btn",disabled:h,children:h?"Updating...":"Save Changes \u2728"})]}),m&&(0,l.jsx)("div",{className:"message-banner ".concat(m.includes("\u2705")?"success":"error"),children:m})]})})}},898:(e,a,s)=>{s.d(a,{CF:()=>l,Og:()=>m,TK:()=>u,WE:()=>c,hG:()=>d,kg:()=>i});var r=s(722),t=s(383);const n="".concat(t.A,"/api/users"),i=e=>r.A.post("".concat(n,"/create"),e),l=()=>r.A.get("".concat(n,"/all")),c=e=>r.A.get("".concat(n,"/getbynumber/").concat(e)),u=(e,a)=>r.A.put("".concat(n,"/update/").concat(e),a),d=e=>r.A.delete("".concat(n,"/delete/").concat(e)),m=(e,a)=>r.A.post("".concat(n,"/check"),{email:e,number:a})}}]);
//# sourceMappingURL=64.f0efa58b.chunk.js.map