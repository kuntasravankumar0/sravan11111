"use strict";(self.webpackChunkmysite3=self.webpackChunkmysite3||[]).push([[39],{39:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var t=a(43),n=a(163),i=(a(371),a(736)),r=a(579);const o=function(e){let{closePopup:s}=e;const[a,n]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[p,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1);return(0,r.jsx)("div",{className:"popup-overlay",children:(0,r.jsxs)("div",{className:"popup-card",children:[(0,r.jsx)("h3",{children:"Create Admin"}),p&&(0,r.jsx)("div",{className:"popup-message ".concat(p.startsWith("\u2705")?"success":"error"),children:p}),(0,r.jsx)("div",{className:"popup-input-group",children:(0,r.jsx)("input",{placeholder:"Name *",value:a,onChange:e=>{n(e.target.value),u("")},className:"popup-input",disabled:m})}),(0,r.jsx)("div",{className:"popup-input-group",children:(0,r.jsx)("input",{placeholder:"Email *",value:o,onChange:e=>{l(e.target.value),u("")},className:"popup-input",disabled:m})}),(0,r.jsx)("div",{className:"popup-input-group",children:(0,r.jsx)("input",{type:"password",placeholder:"Password *",value:c,onChange:e=>{d(e.target.value),u("")},className:"popup-input",disabled:m})}),(0,r.jsxs)("div",{className:"popup-actions",children:[(0,r.jsx)("button",{onClick:async()=>{if(m)return;const e=a.trim(),t=o.trim(),n=c.trim();if(!e)return u("\u26a0 Name is required");if(!t)return u("\u26a0 Email is required");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return u("\u26a0 Invalid email format");if(!n)return u("\u26a0 Password is required");if(n.length<4)return u("\u26a0 Password must be at least 4 characters");u(""),h(!0);try{const a=await(0,i.Jo)({adminname:e,email:t,password:n});u("\u2705 ".concat(a.data)),setTimeout(()=>s(),1200)}catch(r){r.response?u(r.response.data||"\u274c Something went wrong"):u("\u274c Backend offline. Start Spring Boot server.")}finally{h(!1)}},className:"popup-btn-primary",disabled:m,children:m?(0,r.jsx)("div",{className:"spinner"}):"Create Admin"}),(0,r.jsx)("button",{onClick:s,className:"popup-btn-secondary",disabled:m,children:"Close"})]})]})})};const l=function(){const e=(0,n.Zp)(),[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,p]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,v]=(0,t.useState)("");return(0,r.jsxs)("div",{className:"admin-login-page",children:[(0,r.jsxs)("div",{className:"admin-login-card",children:[(0,r.jsx)("h2",{children:"Admin Login"}),(0,r.jsx)("p",{className:"subtitle",children:"Secure access to administrative tools"}),(0,r.jsxs)("div",{className:"admin-login-form",children:[(0,r.jsx)("input",{type:"email",placeholder:"Email Address",value:s,onChange:e=>{a(e.target.value),v("")},disabled:u}),(0,r.jsx)("input",{type:"password",placeholder:"Password",value:l,onChange:e=>{c(e.target.value),v("")},disabled:u}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(!u)if(s.trim()&&l.trim()){m(!0),v("");try{(await(0,i.bN)({email:s,password:l})).data.status&&(localStorage.setItem("adminLoggedIn","true"),v("\u2705 Login successful"),setTimeout(()=>e("/AdminHome",{replace:!0}),500))}catch(t){var a;const e=null===(a=t.response)||void 0===a?void 0:a.data,s="string"===typeof e?e:null===e||void 0===e?void 0:e.message;v("Your account was rejected"===s?"\u274c Account REJECTED":"Waiting for approval"===s?"\u23f3 PENDING approval":"Invalid password"===s?"\u26a0 Invalid password":"User not found"===s?"\u26a0 User not found":"\u274c Error: "+(s||"Unknown"))}finally{m(!1)}}else v("\u26a0 Email and password are required")},disabled:u,children:u?(0,r.jsx)("div",{className:"spinner"}):"Sign In"})]}),h&&(0,r.jsx)("div",{className:"message ".concat(h.includes("\u2705")?"status-success":"status-error"),children:h}),(0,r.jsxs)("div",{className:"footer-text",children:["New admin?",(0,r.jsx)("span",{className:"link-text",onClick:()=>p(!0),children:"Create Account"})]})]}),d&&(0,r.jsx)(o,{closePopup:()=>p(!1)})]})}},371:()=>{},736:(e,s,a)=>{a.d(s,{EY:()=>c,Jo:()=>l,bN:()=>o,qp:()=>p,tx:()=>d});var t=a(722),n=a(383);const i="".concat(n.A,"/api/googleinfo"),r="".concat(n.A,"/api/Adminaprovel"),o=e=>t.A.post("".concat(r,"/login"),e),l=e=>t.A.post("".concat(r,"/register"),e),c=e=>t.A.post("".concat(i),e),d=()=>t.A.get("".concat(i)),p=e=>t.A.delete("".concat(i,"/").concat(e))}}]);
//# sourceMappingURL=39.62b58d98.chunk.js.map