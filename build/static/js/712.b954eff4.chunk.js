"use strict";(self.webpackChunkmysite3=self.webpackChunkmysite3||[]).push([[712],{712:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(555),c=a(43),s=a(722),o=a(383);"".concat(o.A,"/api/links");const i="".concat(o.A,"/api/comments");var l=a(579);const r=()=>{const[e,t]=(0,c.useState)([]),[a,o]=(0,c.useState)([]),[r,d]=(0,c.useState)("pending"),[m,h]=(0,c.useState)(!0),[u,p]=(0,c.useState)(""),[g,j]=(0,c.useState)({}),v=(0,c.useCallback)(async()=>{try{const e=await s.A.get("".concat(i,"/pending"));t(e.data)}catch(u){console.error("Error fetching pending comments:",u)}},[]),x=(0,c.useCallback)(async()=>{try{const e=await s.A.get("".concat(i,"/all"));o(e.data)}catch(u){console.error("Error fetching all comments:",u)}},[]),N=(0,c.useCallback)(async()=>{h(!0);try{await Promise.all([v(),x()]),p("")}catch(u){p("Failed to load comments")}finally{h(!1)}},[v,x]);(0,c.useEffect)(()=>{N()},[N]);const b=async(e,t)=>{j(a=>(0,n.A)((0,n.A)({},a),{},{[e]:t}));try{let n;"approve"===t?n=await(a=e,s.A.put("".concat(i,"/approve/").concat(a))):"reject"===t&&(n=await(e=>s.A.put("".concat(i,"/reject/").concat(e)))(e)),n.data.status?await N():p(n.data.message||"Failed to ".concat(t," comment"))}catch(u){p("Error ".concat(t,"ing comment")),console.error("Error:",u)}finally{j(t=>(0,n.A)((0,n.A)({},t),{},{[e]:null}))}var a},A=async e=>{if(window.confirm("Are you sure you want to delete this comment?")){j(t=>(0,n.A)((0,n.A)({},t),{},{[e]:"delete"}));try{const a=await(t=e,s.A.delete("".concat(i,"/delete/").concat(t)));a.data.status?await N():p(a.data.message||"Failed to delete comment")}catch(u){p("Error deleting comment"),console.error("Error:",u)}finally{j(t=>(0,n.A)((0,n.A)({},t),{},{[e]:null}))}var t}},y=e=>{const t=e.toLowerCase();return(0,l.jsx)("span",{className:"status-badge ".concat(t),children:e})};if(m)return(0,l.jsx)("div",{className:"approval-container loading",children:"Loading comments..."});const f="pending"===r?e:a;return(0,l.jsxs)("div",{className:"approval-container",children:[(0,l.jsx)("h2",{children:"Comment Management"}),(0,l.jsxs)("div",{className:"tabs",children:[(0,l.jsxs)("button",{className:"tab ".concat("pending"===r?"active":""),onClick:()=>d("pending"),children:["Pending (",e.length,")"]}),(0,l.jsxs)("button",{className:"tab ".concat("all"===r?"active":""),onClick:()=>d("all"),children:["All Comments (",a.length,")"]})]}),u&&(0,l.jsx)("div",{className:"error-message",children:u}),(0,l.jsx)("div",{className:"comments-container",children:0===f.length?(0,l.jsx)("div",{className:"no-comments",children:(0,l.jsxs)("p",{children:["No ","pending"===r?"pending":""," comments found."]})}):(0,l.jsx)("div",{className:"comments-grid",children:f.map(e=>{return(0,l.jsxs)("div",{className:"comment-card",children:[(0,l.jsxs)("div",{className:"comment-header",children:[(0,l.jsxs)("div",{className:"comment-info",children:[(0,l.jsx)("strong",{children:e.name}),"all"===r&&y(e.status)]}),(0,l.jsx)("span",{className:"comment-date",children:(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,l.jsx)("div",{className:"comment-content",children:e.content}),(0,l.jsxs)("div",{className:"comment-actions",children:["PENDING"===e.status&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"action-btn approve",onClick:()=>b(e.id,"approve"),disabled:g[e.id],children:"approve"===g[e.id]?"Approving...":"Approve"}),(0,l.jsx)("button",{className:"action-btn reject",onClick:()=>b(e.id,"reject"),disabled:g[e.id],children:"reject"===g[e.id]?"Rejecting...":"Reject"})]}),(0,l.jsx)("button",{className:"action-btn delete",onClick:()=>A(e.id),disabled:g[e.id],children:"delete"===g[e.id]?"Deleting...":"Delete"})]})]},e.id);var t})})})]})}}}]);
//# sourceMappingURL=712.b954eff4.chunk.js.map